(function(t){function e(e){for(var r,o,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},s=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"46e3":function(t,e,a){"use strict";var r=a("7e8c"),n=a.n(r);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e623"),a("e379"),a("5dc8"),a("37e1");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),a("Snackbar"),a("Loading")],1)},s=[],o=(a("96cf"),a("1da1")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-snackbar",{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbar.canShowSnackbar=!1}}},"v-btn",r,!1),[t._v(" X ")])]}}]),model:{value:t.snackbar.canShowSnackbar,callback:function(e){t.$set(t.snackbar,"canShowSnackbar",e)},expression:"snackbar.canShowSnackbar"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},c=[],u={data:function(){return{snackbar:{canShowSnackbar:!1,color:"",timeout:1,text:""}}},created:function(){var t=this;this.$bus.$on("showSnackbar",(function(e,a,r,n){t.showSnackbar(e,a,r,n)}))},methods:{showSnackbar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#81C784",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r=arguments.length>3?arguments[3]:void 0;this.snackbar.canShowSnackbar=t,this.snackbar.color=e,this.snackbar.timeout=a,this.snackbar.text=r}}},l=u,d=a("2877"),p=a("6544"),m=a.n(p),v=a("8336"),h=a("2db4"),g=Object(d["a"])(l,i,c,!1,null,null,null),f=g.exports;m()(g,{VBtn:v["a"],VSnackbar:h["a"]});var b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":t.canCancel,color:t.color,loader:t.loader,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}})],1)},C=[],_=a("9062"),w=a.n(_),x=(a("e40d"),{components:{Loading:w.a},data:function(){return{isLoading:!1,canCancel:!1,color:"#6f42c1",loader:"bars",fullPage:!0}},created:function(){var t=this;this.$bus.$on("showLoading",(function(e){t.showLoading(e)}))},methods:{showLoading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isLoading=!!t}}}),y=x,k=Object(d["a"])(y,b,C,!1,null,null,null),$=k.exports,O={components:{Snackbar:f,Loading:$},created:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{gotoIntroduce:function(){this.$router.push({name:"Introduce"})},goBack:function(){this.$router.forward()}}},P=O,j=(a("5c0b"),Object(d["a"])(P,n,s,!1,null,null,null)),S=j.exports,A=a("8c4f"),R=a("bc3a"),q=a.n(R),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row align-items-center mt-3"},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("h1",{staticClass:"h3 mb-3 font-weight-normal text-center"},[t._v("登入管理員")]),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"請輸入信箱",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"請輸入密碼",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",{staticClass:"btn btn-lg btn-primary btn-block ",attrs:{type:"submit"}},[!1===t.canLogin?a("span",{staticClass:"text-white"},[t._v("登入")]):!0===t.canLogin?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1),a("span",{staticClass:"text-danger"},[t._v(t._s(t.error))]),t._m(0)])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"text-primary"},[t._v("試用信箱:wheat0710@gmail.com")]),a("br"),a("span",{staticClass:"text-primary"},[t._v("試用密碼:wheat0710")]),a("p",[t._v("由於 Google Chrome 在後續 80 版本後會預設封鎖第三方 Cookie，就會出現無法登入的問題，如果遇到登入後，跳回到登入畫面，請重新開啟網頁點連結。 相關解決方式： "),a("a",{attrs:{href:"https://hex.school/zVBbk"}},[t._v("解決文章網址")])])])}],I={data:function(){return{user:{username:"",password:""},error:"",canLogin:!1}},methods:{login:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.canLogin=!0,a="".concat("https://vue-course-api.hexschool.io","/admin/signin"),r=t,e.next=5,t.$http.post(a,r.user);case 5:n=e.sent,s=n.data,s.success?(t.$bus.$emit("showSnackbar",!0,"#81C784",5e3,"登入成功"),t.$router.push("/admin/product")):(t.$bus.$emit("showSnackbar",!0,"#D32F2F",5e3,"登入失敗"),t.error="帳號或密碼錯誤"),t.canLogin=!1;case 9:case"end":return e.stop()}}),e)})))()}},components:{}},L=I,D=(a("c056"),Object(d["a"])(L,E,N,!1,null,null,null)),F=D.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar",{on:{logout:t.logout}}),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("Sidebar"),a("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-0",attrs:{role:"main"}},[a("router-view")],1)],1)])],1)},M=[],T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"},[a("router-link",{staticClass:"navbar-brand col-md-3 col-lg-2 mr-0 px-3",attrs:{to:"/admin/product"}},[t._v("WHEAT0710")]),t._m(0),a("ul",{staticClass:"nav justify-content-end px-3"},["/customer/product"===t.$route.path?a("li",{staticClass:"nav-item d-flex align-items-center dropdown",on:{click:t.getOrders}},[a("div",{staticClass:"dropdown",attrs:{id:"showShoppingCart"}},[a("button",{staticClass:"btn btn-dark",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("font-awesome-icon",{staticClass:"text-white",attrs:{icon:["fa","shopping-cart"]}})],1),a("div",{staticClass:"dropdown-menu dropdown-menu-right mb-0 pb-0"},[0!==t.orders.length||t.canShowOrders?t._e():a("div",{staticClass:"dropdown-item font-weight-bold"},[t._v(" 尚無商品 ")]),t.canShowOrders?a("div",{staticClass:"d-flex justify-content-center h3"},[a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}})],1):t._l(t.orders,(function(e){return a("div",{key:e.id,staticClass:"dropdown-item font-weight-bold d-flex justify-content-between align-items-center pl-2 pr-0",on:{click:function(t){t.stopPropagation()}}},[a("span",[t._v(t._s(e.product.title))]),a("span",{staticClass:"text-danger ml-2 mr-1"},[t._v(t._s(e.qty))]),t._v(" 個 總共 "),a("span",{staticClass:"text-danger mx-2"},[t._v(t._s(e.total))]),t._v(" 元 "),a("button",{staticClass:"btn btn-link",on:{click:function(a){return t.removeOrder(e.id)}}},[a("font-awesome-icon",{staticClass:"text-dark",attrs:{icon:["fa","trash-alt"]}})],1)])})),a("div",{staticClass:"dropdown-item font-weight-bold d-flex align-items-center px-0 pb-0"},[0!==t.orders.length?a("router-link",{staticClass:"btn btn-primary btn-block rounded-0",attrs:{to:"/customer/order"}},[t._v(" 確定購買 ")]):t._e()],1)],2)])]):t._e(),a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"nav-link text-white",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("登出")])])])],1)])},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler position-absolute d-md-none collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],z=(a("99af"),a("2909")),V=a("1157"),W=a.n(V),J={data:function(){return{canShowOrders:!1,orders:[]}},created:function(){},methods:{logout:function(){this.$emit("logout")},getOrders:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,W()("#showShoppingCart").on("show.bs.dropdown",Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.canShowOrders=!0,t.next=3,a.axios.get("".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/cart"));case 3:e=t.sent,r=e.data.data.carts,a.orders=Object(z["a"])(r),a.canShowOrders=!1;case 7:case"end":return t.stop()}}),t)}))));case 3:return a.canShowOrders=!0,e.next=6,a.axios.get("".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/cart"));case 6:r=e.sent,n=r.data.data.carts,a.orders=Object(z["a"])(n),a.canShowOrders=!1;case 10:case"end":return e.stop()}}),e)})))()},removeOrder:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.canShowOrders=!0,a.next=3,e.axios.delete("".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/cart/").concat(t));case 3:return a.next=5,e.getOrders();case 5:e.$bus.$emit("showSnackbar",!0,"#D32F2F",5e3,"刪除成功"),e.canShowOrders=!1;case 7:case"end":return a.stop()}}),a)})))()}}},G=J,H=Object(d["a"])(G,T,B,!1,null,null,null),X=H.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",attrs:{id:"sidebarMenu"}},[a("div",{staticClass:"sidebar-sticky pt-3"},[a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[t._v(" 管理員 ")]),a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/admin/product"===t.$route.path},attrs:{to:"/admin/product"}},[a("span",[t._v("產品列表")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/admin/order"===t.$route.path},attrs:{to:"/admin/order"}},[a("span",[t._v("訂單列表")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/admin/coupon"===t.$route.path},attrs:{to:"/admin/coupon"}},[a("span",[t._v("優惠券")])])],1)]),a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[t._v(" 客戶 ")]),a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/customer/product"===t.$route.path},attrs:{to:"/customer/product"}},[a("span",[t._v("購物畫面")])])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/customer/order"===t.$route.path},attrs:{to:"/customer/order"}},[a("span",[t._v("訂單畫面")])])],1)])])])])},Q=[],Y={},Z=Y,tt=Object(d["a"])(Z,K,Q,!1,null,null,null),et=tt.exports,at={components:{Navbar:X,Sidebar:et},methods:{logout:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat("https://vue-course-api.hexschool.io","/logout"),e.next=3,t.$http.post(a);case 3:r=e.sent,n=r.data,n.success?t.$router.push("/login"):t.$router.go(0),console.log(n);case 7:case"end":return e.stop()}}),e)})))()}}},rt=at,nt=(a("e532"),Object(d["a"])(rt,U,M,!1,null,null,null)),st=nt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"btn btn-primary my-1 mr-2",on:{click:t.createProduct}},[t._v(" 建立新的產品 ")])]),a("table",{staticClass:"table text-center p-0 mb-0"},[t._m(0),a("tbody",t._l(t.allProducts,(function(e){return a("tr",{key:e.id},[a("th",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("thousands")(e.origin_price))+" ")]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("thousands")(e.price)))]),a("td",[a("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"..."}},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.editProduct(e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.removeProduct(e.id)}}},[t.removeID!==e.id?a("span",[t._v("刪除")]):t.removeID===e.id?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1)])])])})),0)]),a("Pagination",{attrs:{pageUrl:"/admin/product",pagination:t.pagination},on:{getSomething:t.getProducts}}),a("ProductCard",{attrs:{product:t.product},on:{getProducts:t.getProducts}})],1)},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col",width:"100"}},[t._v("分類")]),a("th",{attrs:{scope:"col",width:"200"}},[t._v("商品名稱")]),a("th",{attrs:{scope:"col",width:"120"}},[t._v("原價")]),a("th",{attrs:{scope:"col",width:"120"}},[t._v("售價")]),a("th",{attrs:{scope:"col",width:"120"}},[t._v("編輯")])])])}],ct=(a("ac1f"),a("5319"),a("5530")),ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"productCard",tabindex:"-1",role:"dialog"},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submitProduct(t.id=t.Aproduct.id||"")}}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"productTop"}},[t.Aproduct.id?a("span",[t._v("修改產品")]):a("span",[t._v("新增產品")])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.Aproduct.image,expression:"Aproduct.image"}],staticClass:"form-control",class:{"is-invalid":!t.Aproduct.image&&t.errors.has("圖片網址")},attrs:{type:"text",id:"image",name:"圖片網址",placeholder:"請輸入圖片連結"},domProps:{value:t.Aproduct.image},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"image",e.target.value)}}}),!t.Aproduct.image&&t.errors.has("圖片網址")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("圖片網址")))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[a("span",[t._v(" 或 上傳圖片")]),t.canUpload?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"image|size:1000",expression:"'image|size:1000'"}],ref:"image",staticClass:"form-control",class:{"is-invalid":t.errors.has("上傳圖片")},attrs:{type:"file",id:"uploadImage",name:"上傳圖片"},on:{change:t.addImage}})]),t.errors.has("上傳圖片")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("上傳圖片")))]):t._e(),a("img",{staticClass:"img-fluid",attrs:{src:t.Aproduct.image,alt:""}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.Aproduct.title,expression:"Aproduct.title"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("標題")},attrs:{type:"text",id:"title",name:"標題",placeholder:"請輸入標題"},domProps:{value:t.Aproduct.title},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"title",e.target.value)}}}),t.errors.has("標題")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("標題")))]):t._e()]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.Aproduct.category,expression:"Aproduct.category"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("分類")},attrs:{type:"text",id:"category",name:"分類",placeholder:"請輸入分類"},domProps:{value:t.Aproduct.category},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"category",e.target.value)}}}),t.errors.has("分類")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("分類")))]):t._e()]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Aproduct.unit,expression:"Aproduct.unit"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("單位")},attrs:{type:"unit",id:"unit",name:"單位",placeholder:"請輸入單位"},domProps:{value:t.Aproduct.unit},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"unit",e.target.value)}}}),t.errors.has("單位")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("單位")))]):t._e()])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Aproduct.origin_price,expression:"Aproduct.origin_price"},{name:"validate",rawName:"v-validate",value:"required|min_value:0",expression:"'required|min_value:0'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("原價")},attrs:{type:"number",id:"origin_price",name:"原價",placeholder:"請輸入原價"},domProps:{value:t.Aproduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"origin_price",e.target.value)}}}),t.errors.has("原價")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("原價")))]):t._e()]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Aproduct.price,expression:"Aproduct.price"},{name:"validate",rawName:"v-validate",value:"required|min_value:0|max_value:"+(t.Aproduct.origin_price?t.Aproduct.origin_price:0),expression:"\n                      `required|min_value:0|max_value:${\n                        Aproduct.origin_price ? Aproduct.origin_price : 0\n                      }`\n                    "}],staticClass:"form-control",class:{"is-invalid":!!t.Aproduct.origin_price&&t.errors.has("售價")},attrs:{type:"number",oninput:"value = value.replace(/[^\\d]/g, '')",id:"price",name:"售價",placeholder:"請輸入售價",disabled:!t.Aproduct.origin_price,required:!!t.Aproduct.origin_price},domProps:{value:t.Aproduct.price},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"price",e.target.value)}}}),t.Aproduct.origin_price&&t.errors.has("售價")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("售價")))]):t._e(),t.Aproduct.origin_price?t._e():a("span",{staticClass:"text-primary"},[t._v(" 請先輸入原價 ")])])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Aproduct.description,expression:"Aproduct.description"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("產品描述")},attrs:{type:"text",id:"description",name:"產品描述",placeholder:"請輸入產品描述"},domProps:{value:t.Aproduct.description},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Aproduct.content,expression:"Aproduct.content"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("說明內容")},attrs:{type:"text",id:"content",name:"說明內容",placeholder:"請輸入產品說明內容"},domProps:{value:t.Aproduct.content},on:{input:function(e){e.target.composing||t.$set(t.Aproduct,"content",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer",staticStyle:{position:"relative"}},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.submitProduct(t.id=t.Aproduct.id||"")}}},[!1===t.isSubmit?a("span",[t._v("確認")]):!0===t.isSubmit?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1)])])])])])},lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],dt=(a("d3b7"),{props:{product:{type:Object,defalut:{}}},components:{},data:function(){return{canUpload:!1,isLoading:!1,isSubmit:!1,Aproduct:{}}},methods:{toggleCard:function(t){t?W()("#productCard").modal("show"):W()("#productCard").modal("hide")},submitProduct:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isSubmit=!0,r=document.getElementById("uploadImage"),r.value="",n=e,a.next=6,e.$validator.validate().then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(r){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=13;break}if(s="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/product"),!t){a.next=7;break}return a.next=5,n.editProduct(s,t);case 5:a.next=9;break;case 7:return a.next=9,n.createProduct(s);case 9:new Promise((function(t){return n.$emit("getProducts",e.$route.query.page,t)})),e.toggleCard(!1),a.next=14;break;case 13:document.getElementById("productTop").scrollIntoView();case 14:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 6:e.$bus.$emit("showSnackbar",!0,"#81C784",5e3,e.Aproduct.id?"修改成功":"建立成功"),e.isSubmit=!1;case 8:case"end":return a.stop()}}),a)})))()},createProduct:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.post(t,{data:e.Aproduct});case 2:case"end":return a.stop()}}),a)})))()},editProduct:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$http.put(t+"/".concat(e),{data:a.Aproduct});case 2:case"end":return r.stop()}}),r)})))()},addImage:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.canUpload=!0,a=t.$refs.image.files[0],r=new FormData,r.append("image",a),n="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/upload"),e.next=7,t.axios.post(n,r,{headers:{"Content-Type":"multipart/form-data"}});case 7:s=e.sent,t.Aproduct.image=s.data.imageUrl,t.canUpload=!1;case 10:case"end":return e.stop()}}),e)})))()}},watch:{product:function(){this.Aproduct=Object(ct["a"])({},this.product),this.errors.clear(),this.toggleCard(!0)}}}),pt=dt,mt=Object(d["a"])(pt,ut,lt,!1,null,null,null),vt=mt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0!==t.pagination.total_pages?a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre},on:{click:function(e){return t.getSomething(t.previousPage,!t.pagination.has_pre)}}},[a("router-link",{staticClass:"page-link",attrs:{to:{path:""+t.pageUrl,query:{page:""+t.previousPage}},"aria-label":"Previous"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),a("span",{staticClass:"sr-only"},[t._v("Previous")])])],1),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:e===t.currentPage},on:{click:function(a){return t.getSomething(e)}}},[a("router-link",{staticClass:"page-link",attrs:{to:{path:""+t.pageUrl,query:{page:""+e}}}},[t._v(t._s(e))])],1)})),a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next},on:{click:function(e){return t.getSomething(t.nextPage,!t.pagination.has_next)}}},[a("router-link",{staticClass:"page-link",attrs:{to:{path:""+t.pageUrl,query:{page:""+t.nextPage}},"aria-label":"Next"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),a("span",{staticClass:"sr-only"},[t._v("Next")])])],1)],2)]):t._e()])},gt=[],ft={props:{pageUrl:{type:String},pagination:{type:Object}},data:function(){return{currentPage:1}},methods:{getSomething:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){if(this.currentPage===t)return;this.currentPage=t,this.$emit("getSomething",t)}}},computed:{previousPage:function(){return parseInt(this.$route.query.page||1)-1},nextPage:function(){return parseInt(this.$route.query.page||1)+1}}},bt=ft,Ct=Object(d["a"])(bt,ht,gt,!1,null,null,null),_t=Ct.exports,wt={components:{ProductCard:vt,Pagination:_t},data:function(){return{allProducts:[],pagination:{},product:{},removeID:""}},created:function(){this.getProducts()},methods:{getProducts:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s,o,i,c,u,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:1,n=t.length>1&&void 0!==t[1]?t[1]:null,e.$bus.$emit("showLoading",!0),s="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/products?page=").concat(r),a.next=6,e.$http.get(s);case 6:o=a.sent,i=o.data,c=i.success,!c&&e.$router.push("/login"),u=i.products,l=i.pagination,e.allProducts=Object(z["a"])(u),e.pagination=Object(ct["a"])({},l),n&&n(""),e.$bus.$emit("showLoading",!1);case 15:case"end":return a.stop()}}),a)})))()},createProduct:function(){this.product={}},editProduct:function(t){this.product=Object(ct["a"])({},t)},removeProduct:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.removeID=t,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/product/").concat(t),a.next=4,e.$http.delete(r);case 4:e.$bus.$emit("showSnackbar",!0,"#D32F2F",5e3,"已刪除"),e.getProducts();case 6:case"end":return a.stop()}}),a)})))()}},filters:{thousands:function(t){return t="$"+String(t).replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),t}}},xt=wt,yt=(a("46e3"),Object(d["a"])(xt,ot,it,!1,null,null,null)),kt=yt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table text-center p-0 mb-0"},[t._m(0),a("tbody",t._l(t.orders,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.num))]),a("td",[t._v(t._s(e.user?e.user.name:"無名氏"))]),a("td",[e.is_paid?a("span",{staticClass:"text-success"},[t._v("已付款")]):a("span",{staticClass:"text-muted"},[t._v("未付款")])]),a("td",[t._v(t._s(e.total))])])})),0)]),a("Pagination",{attrs:{pageUrl:"/admin/order",pagination:t.pagination},on:{getSomething:t.getOrders}})],1)},Ot=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("訂單編號")]),a("th",{attrs:{scope:"col"}},[t._v("購買人")]),a("th",{attrs:{scope:"col"}},[t._v("是否付款")]),a("th",{attrs:{scope:"col"}},[t._v("總共金額")])])])}],Pt={components:{Pagination:_t},created:function(){this.getOrders()},data:function(){return{removeID:"",pagination:{},orders:[]}},methods:{getOrders:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s,o,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:1,e.$bus.$emit("showLoading",!0),n="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/orders?page=").concat(r),a.next=5,e.axios.get(n);case 5:s=a.sent,o=s.data,i=o.orders,c=o.pagination,e.orders=Object(z["a"])(i),e.pagination=Object(ct["a"])({},c),console.log(e.orders),e.$bus.$emit("showLoading",!1);case 12:case"end":return a.stop()}}),a)})))()}}},jt=Pt,St=Object(d["a"])(jt,$t,Ot,!1,null,null,null),At=St.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"btn btn-primary my-1 mr-2",on:{click:t.createCoupon}},[t._v(" 建立優惠券 ")])]),a("table",{staticClass:"table text-center p-0 mb-0"},[t._m(0),a("tbody",t._l(t.allCoupons,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.code))]),a("td",[t._v(t._s(e.percent/10))]),a("td",[a("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"..."}},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.editCoupon(e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.removeCoupon(e.id)}}},[t.removeID!==e.id?a("span",[t._v("刪除")]):t.removeID===e.id?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1)])])])})),0)]),a("Pagination",{attrs:{pageUrl:"/admin/coupon",pagination:t.pagination},on:{getSomething:t.getCoupons}}),a("CouponCard",{attrs:{coupon:t.coupon},on:{getCoupons:t.getCoupons}})],1)},qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col",width:"120"}},[t._v("優惠券名稱")]),a("th",{attrs:{scope:"col",width:"200"}},[t._v("優惠碼")]),a("th",{attrs:{scope:"col",width:"120"}},[t._v("幾折")]),a("th",{attrs:{scope:"col",width:"120"}},[t._v("編輯")])])])}],Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade bd-example-modal-sm",attrs:{id:"couponCard",tabindex:"-1",role:"dialog"},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submitCoupon(t.id=t.aCoupon.id||"")}}},[a("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white",attrs:{id:"couponTop"}},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t.aCoupon.id?a("span",[t._v("修改優惠券")]):a("span",[t._v("新增優惠券")])]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"couponName"}},[t._v("優惠券名稱")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.aCoupon.title,expression:"aCoupon.title"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("優惠券名稱")},attrs:{type:"text",id:"couponName",name:"優惠券名稱",placeholder:"請輸入優惠券名稱"},domProps:{value:t.aCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.aCoupon,"title",e.target.value)}}}),t.errors.has("優惠券名稱")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("優惠券名稱")))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"fold"}},[t._v("折數")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.aCoupon.percent,expression:"aCoupon.percent"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("折數")},attrs:{type:"text",id:"fold",name:"折數",placeholder:"請輸入折數"},domProps:{value:t.aCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.aCoupon,"percent",e.target.value)}}}),t.errors.has("折數")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("折數")))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"promoCode"}},[t._v("優惠碼")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.aCoupon.code,expression:"aCoupon.code"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("優惠碼")},attrs:{type:"text",id:"promoCode",name:"優惠碼",placeholder:"請輸入優惠碼"},domProps:{value:t.aCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.aCoupon,"code",e.target.value)}}}),t.errors.has("優惠碼")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("優惠碼")))]):t._e()])]),a("div",{staticClass:"modal-footer",staticStyle:{position:"relative"}},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.submitCoupon(t.id=t.aCoupon.id||"")}}},[!1===t.isSubmit?a("span",[t._v("確認")]):!0===t.isSubmit?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1)])])])]),a("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}})])},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],It={props:{coupon:{type:Object,defalut:{}}},components:{},data:function(){return{aCoupon:{},isLoading:!1,isSubmit:!1}},methods:{toggleCard:function(t){t?W()("#couponCard").modal("show"):W()("#couponCard").modal("hide")},submitCoupon:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isSubmit=!0,a.next=3,e.$validator.validate().then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(r){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=14;break}if(e.aCoupon.due_date=Date.now(),n="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/coupon"),!t){a.next=8;break}return a.next=6,e.editCoupon(n,t);case 6:a.next=10;break;case 8:return a.next=10,e.createCoupon(n);case 10:new Promise((function(t){return e.$emit("getCoupons",e.$route.query.page,t)})),e.toggleCard(!1),a.next=15;break;case 14:document.getElementById("couponTop").scrollIntoView();case 15:e.$bus.$emit("showSnackbar",!0,"#81C784",5e3,e.aCoupon.id?"修改成功":"建立成功"),e.isSubmit=!1;case 17:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 3:case"end":return a.stop()}}),a)})))()},createCoupon:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e,a.next=3,e.$http.post(t,{data:Object(ct["a"])(Object(ct["a"])({},r.aCoupon),{},{percent:10*r.aCoupon.percent})});case 3:case"end":return a.stop()}}),a)})))()},editCoupon:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=a,r.next=3,a.$http.put(t+"/".concat(e),{data:Object(ct["a"])(Object(ct["a"])({},n.aCoupon),{},{percent:10*n.aCoupon.percent})});case 3:case"end":return r.stop()}}),r)})))()}},watch:{coupon:function(){console.log(1),this.coupon.id?this.aCoupon=Object(ct["a"])(Object(ct["a"])({},this.coupon),{},{percent:this.coupon.percent/10}):this.aCoupon=Object(ct["a"])({},this.coupon),this.errors.clear(),this.toggleCard(!0)}}},Lt=It,Dt=Object(d["a"])(Lt,Et,Nt,!1,null,null,null),Ft=Dt.exports,Ut={components:{CouponCard:Ft,Pagination:_t},created:function(){this.getCoupons()},data:function(){return{removeID:"",pagination:{},coupon:{},allCoupons:[]}},methods:{getCoupons:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s,o,i,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:1,n=t.length>1&&void 0!==t[1]?t[1]:null,e.$bus.$emit("showLoading",!0),s="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/coupons?page=").concat(r),a.next=6,e.axios.get(s);case 6:o=a.sent,i=o.data,c=i.coupons,u=i.pagination,e.allCoupons=Object(ct["a"])({},c),e.pagination=Object(ct["a"])({},u),n&&n(""),e.$bus.$emit("showLoading",!1);case 13:case"end":return a.stop()}}),a)})))()},createCoupon:function(){this.coupon={}},editCoupon:function(t){this.coupon=Object(ct["a"])({},t)},removeCoupon:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.removeID=t,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/admin/coupon/").concat(t),a.next=4,e.axios.delete(r);case 4:e.$bus.$emit("showSnackbar",!0,"#D32F2F",5e3,"已刪除"),e.getCoupons();case 6:case"end":return a.stop()}}),a)})))()}}},Mt=Ut,Tt=Object(d["a"])(Mt,Rt,qt,!1,null,null,null),Bt=Tt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-2"},[a("div",{staticClass:"row"},t._l(t.products,(function(e){return a("div",{key:e.id,staticClass:"col-md-4 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm"},[a("img",{staticClass:"card-img-top",attrs:{src:e.image,height:"300"}}),a("div",{staticClass:"card-body"},[a("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))]),a("h5",{staticClass:"card-title"},[t._v(" "+t._s(e.title)+" ")]),a("p",{staticClass:"card-text"},[t._v("內容")]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a("del",{staticClass:"h6"},[t._v("原價 "+t._s(e.origin_price)+" 元")]),a("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(e.price)+" 元")])])]),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.getProduct(e.id)}}},[e.id===t.productId?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):a("span",[t._v(" 查看更多 ")])],1),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){return t.addCart(e.id)}}},[e.id!==t.addCartId?a("span",[a("font-awesome-icon",{attrs:{icon:["fa","shopping-cart"]}}),t._v(" 加到購物車")],1):t._e(),t.canAddCart&&e.id===t.addCartId?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1)])])])})),0),a("Pagination",{attrs:{pageUrl:"/customer/product",pagination:t.pagination},on:{getSomething:t.getProducts}}),a("ProductCard",{attrs:{product:t.product},on:{addCart:t.addCart}})],1)},Vt=[],Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal fade",attrs:{id:"productCard",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title font-weight-bold",attrs:{id:"exampleModalLabel"}},[t._v(" "+t._s(t.aProduct.title)+" ")]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"w-100 my-2",attrs:{src:t.aProduct.image}}),a("span",{staticClass:"font-weight-bold"},[t._v("課程優惠上線中")]),a("div",{staticClass:"d-flex justify-content-between align-items-center my-3"},[a("span",{staticClass:"small font-weight-bold"},[a("del",[t._v("原價 "+t._s(t.aProduct.origin_price)+" 元")])]),a("span",{staticClass:"h4 font-weight-bold m-0"},[t._v("現在只要 "+t._s(t.aProduct.price)+" 元")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.aProduct.num,expression:"aProduct.num"}],staticClass:"form-control custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.aProduct,"num",e.target.multiple?a:a[0])}}},t._l(10,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v("選購 "+t._s(e+" "+t.aProduct.unit)+" ")])})),0)]),a("div",{staticClass:"modal-footer"},[a("span",{staticClass:"small font-weight-bold text-muted"},[t._v("小計 "+t._s(t.aProduct.price*t.aProduct.num)+" 元")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addCart}},[t.canAddCart?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):a("span",[t._v("加到購物車")])],1)])])])])])},Jt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Gt={components:{},props:{product:Object,default:{}},data:function(){return{canAddCart:!1,aProduct:{}}},methods:{toggleCart:function(t){t?W()("#productCard").modal("show"):W()("#productCard").modal("hide")},addCart:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.canAddCart=!0,e.next=3,new Promise((function(e){return t.$emit("addCart",t.aProduct.id,t.aProduct.num,e)}));case 3:t.$bus.$emit("showSnackbar",!0,"#81C784",5e3,"已加入購物車"),t.canAddCart=!1,t.toggleCart(!1);case 6:case"end":return e.stop()}}),e)})))()}},watch:{product:function(){this.aProduct=Object(ct["a"])(Object(ct["a"])({},this.product),{},{num:1}),this.toggleCart(!0)}}},Ht=Gt,Xt=Object(d["a"])(Ht,Wt,Jt,!1,null,null,null),Kt=Xt.exports,Qt={components:{ProductCard:Kt,Pagination:_t},data:function(){return{canAddCart:!1,productId:null,addCartId:null,toShoppingCartId:null,pagination:{},products:[],product:{}}},created:function(){this.getProducts()},methods:{getProducts:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s,o,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:1,e.$bus.$emit("showLoading",!0),n="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/products?page=").concat(r),a.next=5,e.$http.get(n);case 5:s=a.sent,o=s.data,i=o.products,c=o.pagination,e.products=Object(z["a"])(i),e.pagination=Object(ct["a"])({},c),e.$bus.$emit("showLoading",!1);case 11:case"end":return a.stop()}}),a)})))()},getProduct:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.productId=t,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/product/").concat(t),a.next=4,e.$http.get(r);case 4:n=a.sent,s=n.data,o=s.product,e.product=Object(ct["a"])({},o),e.productId=null;case 9:case"end":return a.stop()}}),a)})))()},addCart:function(t){var e=arguments,a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,s,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.length>1&&void 0!==e[1]?e[1]:1,s=e.length>2&&void 0!==e[2]?e[2]:null,a.canAddCart=!0,a.addCartId=t,o={product_id:t,qty:n},i="".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/cart"),r.next=8,a.$http.post(i,{data:o});case 8:s&&s(""),a.$bus.$emit("showSnackbar",!0,"#81C784",5e3,"已加入購物車"),a.canAddCart=!1,a.addCartId=null;case 12:case"end":return r.stop()}}),r)})))()}}},Yt=Qt,Zt=Object(d["a"])(Yt,zt,Vt,!1,null,null,null),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row justify-content-around"},[a("div",{staticClass:"col-md-5"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",[0===t.orders.length?a("tr",[a("td",[t._v("尚無商品")])]):t._l(t.orders,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.removeOrder(e.id)}}},[t.canRemoveProduct?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):a("font-awesome-icon",{attrs:{icon:["fa","trash-alt"]}})],1)]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" "),e.coupon?a("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):t._e()]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.qty)+"/"+t._s(e.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.final_total))])])}))],2),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.total))])]),t.total!==t.final_total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),a("td",{staticClass:"text-right text-success"},[t._v(t._s(t.final_total))])]):t._e()])]),0!==t.orders.length?a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.useCoupon}},[t._v(" 套用優惠碼 ")])])]):t._e()]),a("form",{staticClass:"col-md-5",on:{submit:function(e){return e.preventDefault(),t.submitOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",attrs:{type:"email",name:"Email",id:"useremail",placeholder:"請輸入 Email",required:"",disabled:0===t.orders.length},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),t.errors.has("Email")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("Email"))+" ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"收件人姓名",id:"username",placeholder:"輸入姓名",required:"",disabled:0===t.orders.length},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),t.errors.has("收件人姓名")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("收件人姓名"))+" ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model",value:t.user.tel,expression:"user.tel"}],staticClass:"form-control",attrs:{type:"tel",name:"收件人電話",id:"usertel",placeholder:"請輸入電話",required:"",disabled:0===t.orders.length},domProps:{value:t.user.tel},on:{input:function(e){e.target.composing||t.$set(t.user,"tel",e.target.value)}}}),t.errors.has("收件人電話")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("收件人電話"))+" ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.address,expression:"user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"收件人地址",id:"useraddress",placeholder:"請輸入地址",required:"",disabled:0===t.orders.length},domProps:{value:t.user.address},on:{input:function(e){e.target.composing||t.$set(t.user,"address",e.target.value)}}}),t.errors.has("收件人地址")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("收件人地址"))+" ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.message,expression:"user.message"}],staticClass:"form-control",attrs:{id:"comment",cols:"30",rows:"10",disabled:0===t.orders.length},domProps:{value:t.user.message},on:{input:function(e){e.target.composing||t.$set(t.user,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger"},[!1===t.isSubmit?a("span",[t._v("送出訂單")]):!0===t.isSubmit?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):t._e()],1)])])])])},ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th"),a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],re={data:function(){return{code:"",total:0,final_total:0,canRemoveProduct:!1,isSubmit:!1,orders:[],user:{}}},created:function(){this.getOrders()},methods:{getOrders:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$bus.$emit("showLoading",!0),e.next=3,t.axios.get("".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/cart"));case 3:a=e.sent,r=a.data.data,n=r.carts,s=r.total,o=r.final_total,t.orders=Object(z["a"])(n),t.total=s,t.final_total=o,t.$bus.$emit("showLoading",!1);case 9:case"end":return e.stop()}}),e)})))()},useCoupon:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,t.axios.post("".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/coupon"),{data:{code:a.code}});case 3:r=e.sent,n=r.data.success,console.log(n),n?(s=r.data.final_total,t.final_total=s,t.$bus.$emit("showSnackbar",!0,"#81C784",5e3,r.data.message)):t.$bus.$emit("showSnackbar",!0,"#D32F2F",5e3,r.data.message),t.code="",t.getOrders();case 9:case"end":return e.stop()}}),e)})))()},submitOrder:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSubmit=!0,a=t,e.next=4,t.axios.post("".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/order"),{data:{user:a.user}});case 4:t.$bus.$emit("showSnackbar",!0,"#81C784",5e3,"訂單建立"),t.getOrders(),t.user={},t.isSubmit=!1,t.$router.push({path:"/admin/order"});case 9:case"end":return e.stop()}}),e)})))()},removeOrder:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.canRemoveProduct=!0,a.next=3,e.axios.delete("".concat("https://vue-course-api.hexschool.io","/api/").concat("wheat710","/cart/").concat(t));case 3:e.$bus.$emit("showSnackbar",!0,"#D32F2F",5e3,"刪除成功"),e.canRemoveProduct=!1,e.getOrders();case 6:case"end":return a.stop()}}),a)})))()}},components:{}},ne=re,se=Object(d["a"])(ne,ee,ae,!1,null,null,null),oe=se.exports;r["a"].use(A["a"]);var ie=[{path:"*",redirect:"/customer/product"},{path:"/admin",redirect:"/admin/product",component:st,children:[{path:"product",name:"Product",component:kt,meta:{requiresAuth:!0}},{path:"order",name:"a_order",component:At,meta:{requiresAuth:!0}},{path:"coupon",name:"coupon",component:Bt,meta:{requiresAuth:!0}}]},{path:"/customer",redirect:"/customer/product",component:st,children:[{path:"product",name:"c_product",component:te},{path:"order",name:"c_order",component:oe}]},{path:"/login",name:"Login",component:F}],ce=new A["a"]({mode:"history",routes:ie});ce.beforeEach(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a,r){var n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.meta.requiresAuth){t.next=9;break}return n="".concat("https://vue-course-api.hexschool.io","/api/user/check"),t.next=4,q.a.post(n);case 4:s=t.sent,o=s.data,o.success?r():r({path:"/login"}),t.next=10;break;case 9:r();case 10:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}());var ue=ce,le=a("7bb1"),de=a("427f"),pe=a.n(de),me=a("a925");r["a"].use(me["a"]);var ve=new me["a"]({locale:"zhTW"});r["a"].use(le["a"],{events:"input|blur",useConstraintAttrs:!1,i18n:ve,dictionary:{zhTW:pe.a}});var he=ve,ge=a("f309");r["a"].use(ge["a"]);var fe=new ge["a"]({}),be=(a("4989"),a("a7fe")),Ce=a.n(be);q.a.defaults.withCredentials=!0,r["a"].use(Ce.a,q.a);var _e=a("ecee"),we=a("c074"),xe=a("ad3d");_e["c"].add(we["b"],we["a"],we["c"]),r["a"].component("font-awesome-icon",xe["a"]),r["a"].prototype.$bus=new r["a"],r["a"].config.productionTip=!1,new r["a"]({router:ue,I18n:he,vuetify:fe,render:function(t){return t(S)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var r=a("9c0c"),n=a.n(r);n.a},7424:function(t,e,a){},"7e8c":function(t,e,a){},"9c0c":function(t,e,a){},a60b:function(t,e,a){},c056:function(t,e,a){"use strict";var r=a("7424"),n=a.n(r);n.a},e532:function(t,e,a){"use strict";var r=a("a60b"),n=a.n(r);n.a}});
//# sourceMappingURL=app.61b96f46.js.map